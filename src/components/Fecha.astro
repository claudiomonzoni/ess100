---
// Obtener fecha como string desde props
interface Props {
  fecha?: string; // formato: "2025-11-15"
}

const { fecha } = Astro.props;

// Detectar idioma desde la URL
const idioma = Astro.url.pathname.startsWith("/en/") ? "en" : "fr";

// Diccionarios de nombres en francés e inglés
const meses = {
  fr: [
    "janv.", "févr.", "mars", "avr.", "mai", "juin",
    "juil.", "août", "sept.", "oct.", "nov.", "déc."
  ],
  en: [
    "Jan", "Feb", "Mar", "Apr", "May", "Jun",
    "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
  ]
};

const dias = {
  fr: [
    "dim.", "lun.", "mar.", "mer.", "jeu.", "ven.", "sam."
  ],
  en: [
    "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"
  ]
};

// Validar fecha
let diaNumero = "";
let nombreDia = "";
let nombreMes = "";

if (fecha) {
  // Convertir a objeto Date
  const dateObj = new Date(fecha);
  
  // Extraer valores según el idioma
  diaNumero = dateObj.getDate().toString(); // 1-31
  nombreDia = dias[idioma][dateObj.getDay()]; // lundi, Monday, etc.
  nombreMes = meses[idioma][dateObj.getMonth()]; // novembre, November, etc.
}
---

<div id="fecha">
  {fecha ? (
    <>
      <div class="Numerodia">{diaNumero}</div>
      <div class="mes">{nombreMes}</div>
      <div class="nombredia">{nombreDia}</div>
    </>
  ) : (
    <div>Fecha no disponible</div>
  )}
</div>

<style lang="scss">
  @use '/src/styles/variables.scss' as *;
  #fecha {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: 1rem;
    background: $fondo;
  }
  
  .Numerodia {
    font-size: clamp(2rem, 3vw, 3rem);
    color: $dorado;
  }
  
  .mes{
    font-weight: bold;
  }
  .nombredia, .mes {
    font-size: 0.9rem;
    color: $gris;
  }
</style>